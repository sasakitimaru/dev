---
title: ã€ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‘Javaã®Factory Methodã«ã¤ã„ã¦
slug: design-pattern/java-factory-method
icon: â˜•ï¸
description: ä»Šå›ã¯Javaã®Factoryãƒ¡ã‚½ãƒƒãƒ‰ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚
date: "2023-09-16"
categories:
  - Java
  - ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³
---
## Factoryãƒ¡ã‚½ãƒƒãƒ‰

Factoryã¯å·¥å ´ã§ã™ã€‚
è£½å“ã‚’åŠ å·¥ã—ã¦ä½œã‚‹ã®ãŒå·¥å ´ã®å½¹ç›®ã§ã™ã€‚
ä»Šå›ã¯ãƒ‘ã‚¹ã‚¿å·¥å ´ã‚’ä½œã£ã¦ã€ãƒšãƒšãƒ­ãƒ³ãƒãƒ¼ãƒã‚„ã‚«ãƒ«ãƒœãƒŠãƒ¼ãƒ©ã‚’ä½œã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

## å®Ÿè£…

### Productã‚¯ãƒ©ã‚¹

Productã‚¯ãƒ©ã‚¹ã¯Factoryã§ç”Ÿç”£ã•ã‚Œã‚‹è£½å“ã®æŠ½è±¡ã‚¯ãƒ©ã‚¹ã«ãªã‚Šã¾ã™ã€‚
Factoryã§ä½œã‚‰ã‚Œã‚‹è£½å“ã¯ä½•ã§ã‚ã‚Œã€displayï¼ˆå±•ç¤ºï¼‰ã§ãã‚‹ã¨ã„ã†äº‹ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚

```java:java
package framework;

public abstract class Product {
    public abstract void display();
}
```

### Factoryã‚¯ãƒ©ã‚¹

Factoryã‚¯ãƒ©ã‚¹ã§ã¯Templateãƒ¡ã‚½ãƒƒãƒ‰ãŒä½¿ã‚ã‚Œã¦ã¾ã™ã€‚
Templateãƒ¡ã‚½ãƒƒãƒ‰ã«ã¤ã„ã¦ã¯[ã“ã¡ã‚‰](./ã€ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‘Javaã®TemplateMethodã«ã¤ã„ã¦)ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚
ã“ã“ã§ã¯å·¥å ´ã¯createãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã¦è£½å“ã‚’ä½œã‚‹ã€ã¨è¨€ã†ã“ã¨ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚
ã¾ãŸcreateã§ã¯createProductã§è£½å“ã‚’ä½œã‚Šã€resisterProductã§è£½å“ã‚’ç™»éŒ²ã™ã‚‹ã€ã¨è¨€ã†æ‰‹é †ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚

```java:java
package framework;

public abstract class Factory {
    protected abstract Product createProduct(String name);
    protected abstract void registerProduct(Product product);
    public final Product create(String name) {
        Product p = createProduct(name);
        registerProduct(p);
        return p;
    }
}
```

### Pastaã‚¯ãƒ©ã‚¹

ã“ã“ã‹ã‚‰ã¯dishãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚¯ãƒ©ã‚¹ã‚’å®Ÿè£…ã—ã¾ã™ã€‚ï¼ˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨åˆ†é›¢ã—ã¦ã„ã‚‹ã“ã¨ã‚’æ˜ç¤ºã™ã‚‹ãŸã‚ï¼‰
Pastaã‚¯ãƒ©ã‚¹ã§ã¯ãƒ‘ã‚¹ã‚¿ã‚’æ§‹æˆã™ã‚‹ææ–™ãªã©ã‚’å®šç¾©ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
ã¾ãŸã€Productã‚¯ãƒ©ã‚¹ã‚’ç¶™æ‰¿ã—ã¦ä½œæˆã—ãŸãƒ‘ã‚¹ã‚¿ã‚’ç¢ºèªã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

```java:java
package dish;

import framework.Product;
public class Pasta extends Product{
    private String pastaType;
    private String ingredient;
    private String sauce;

    public Pasta(String pastaType) {
        this.pastaType = pastaType;
    }
    public void addIngredient(String ingredient) {
        System.out.println("Making ... ");
        System.out.println("Add: " + ingredient);
        this.ingredient = ingredient;
    }
    public void addSauce(String sauce) {
        System.out.println("Add: " + sauce);
        this.sauce = sauce;
    }
    @Override
    public void display() {
        System.out.println("--------Created Pasta--------");
        System.out.println("Pasta: " + pastaType);
        System.out.println("Ingredient: " + ingredient);
        System.out.println("Sauce: " + sauce);
        System.out.println("----------------------------");
    }
}
```

### PastaFactoryã‚¯ãƒ©ã‚¹

PastaFactoryã‚¯ãƒ©ã‚¹ã§ã¯Pastaã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã¦ã€**å·¥å ´ã§ã®è£½é€ **ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚
createProductã®æ‰‹é †ã‚’ã‚ã‚‰ã‹ã˜ã‚å®šç¾©ã—ã¦ãŠãã“ã¨ã§ãƒ¦ãƒ¼ã‚¶ãŒå‹æ‰‹ã«è‰²ã€…ãªãƒšãƒšãƒ­ãƒ³ãƒãƒ¼ãƒã‚’è‡ªä½œã™ã‚‹ã“ã¨ãŒç„¡ããªã‚Šã¾ã™ã€‚ï¼ˆå‹æ‰‹ã«ãƒãƒ¼ã‚ºå…¥ã‚Œã‚‰ã‚ŒãŸã‚Šã—ãªã„ï¼‰
ã“ã®ãŠã‹ã’ã§createProductã«Peperoncinoã‚’ä¸ãˆã‚Œã°è‡ªå‹•ã§ãƒšãƒšãƒ­ãƒ³ãƒãƒ¼ãƒã‚’ä½œã£ã¦ãã‚Œã¾ã™ã€‚

```java:java
package dish;

import framework.Factory;
import framework.Product;

import java.util.Objects;

public class PastaFactory extends Factory {
    @Override
    protected Product createProduct(String name){
        if(name.equals("Peperoncino")){
            Pasta pepe = new Pasta(name);
            pepe.addIngredient("chili pepper");
            pepe.addSauce("garlic");
            return pepe;
        } else if (name.equals("Carbonara")) {
            Pasta carbo = new Pasta(name);
            carbo.addIngredient("bacon");
            carbo.addSauce("egg and milk");
            return carbo;
        } else {
            Pasta plain = new Pasta("Plain");
            plain.addIngredient("null");
            plain.addSauce("null");
            return plain;
        }
    }
    @Override
    protected void registerProduct(Product product){
        System.out.println(product + " registered");
    }
}
```

### Mainã‚¯ãƒ©ã‚¹

Mainã‚¯ãƒ©ã‚¹ã§ã¯å·¥å ´ã§è£½å“ãŒä½œã‚‰ã‚Œã‚‹ã“ã¨ã•ãˆçŸ¥ã£ã¦ã„ã‚Œã°å•é¡Œãªã„ã§ã™ã€‚
ä»¥ä¸‹ã§ã¯Factory, Productã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã—ã‹ç”¨ã„ã¦ã¾ã›ã‚“ã€‚
ã“ã‚Œã«ã‚ˆã‚ŠMainã‚¯ãƒ©ã‚¹ã‹ã‚‰å®Ÿè£…ã‚’éš è”½ã™ã‚‹ã“ã¨ãŒã§ãã€PastaFactoryã®ä¸­èº«ãŒã©ã®ã‚ˆã†ã«å¤‰ã‚ã£ã¦ã‚‚Mainã‚¯ãƒ©ã‚¹ã¯ãã‚Œã‚’çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ï¼ˆï¼ä¿®æ­£ä¸è¦ï¼‰
ã¾ãŸcreateã«ã¯ä½œã‚‹ãƒ‘ã‚¹ã‚¿ã®åå‰ã§ä¾é ¼ã™ã‚Œã°ãã‚Œã«å¿œã˜ãŸå…·æã‚’è¶³ã—ã¦ãƒ‘ã‚¹ã‚¿ãŒä½œã‚‰ã‚Œã¾ã™ã€‚
å‹æ‰‹ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚ªãƒªã‚¸ãƒŠãƒ«ã®ãƒšãƒšãƒ­ãƒ³ãƒãƒ¼ãƒã‚’ä½œã‚‹å¿ƒé…ã‚’ç„¡ãã™ã“ã¨ãŒã§ãã¾ã™ã€‚

```java:java
package dish;

import framework.Factory;
import framework.Product;

public class Main {
    public static void main(String[] args) {
        Factory factory = new PastaFactory();
        Product pepe = factory.create("Peperoncino");
        pepe.display();
        Product carbo = factory.create("Carbonara");
        carbo.display();
        Product plain = factory.create("Plain");
        plain.display();
    }
}
```

å®Ÿè¡Œçµæœ

```
Making ... 
Add: chili pepper
Add: garlic
dish.Pasta@13221655 registered
--------Created Pasta--------
Pasta: Peperoncino
Ingredient: chili pepper
Sauce: garlic
----------------------------
Making ... 
Add: bacon
Add: egg and milk
dish.Pasta@2f2c9b19 registered
--------Created Pasta--------
Pasta: Carbonara
Ingredient: bacon
Sauce: egg and milk
----------------------------
Making ... 
Add: null
Add: null
dish.Pasta@31befd9f registered
--------Created Pasta--------
Pasta: Plain
Ingredient: null
Sauce: null
----------------------------
```

See you laterğŸ‘‹