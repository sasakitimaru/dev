---
title: ã€ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‘Javaã®Facadeãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦
slug: design-pattern/java-facade-pattern
icon: â˜•ï¸
description: ä»Šå›ã¯facadeãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚
date: "2023-09-26"
tags:
    - Java
    - ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³
categories:
    - ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°
---

## Facade

ä»Šã¾ã§ä½œã£ã¦ããŸä¸€ã¤ã®æ¦‚å¿µã¨ã—ã¦ã®å‡¦ç†ï¼ˆãƒã‚±ãƒ¢ãƒ³ãƒãƒˆãƒ«ã€ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ã€HTMLæ–‡æ›¸ä½œæˆãªã©ï¼‰ã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹åŒ–ã™ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚
ãã“ã¾ã§é›£ã—ããªã„ã§ã™ã€‚
ä»Šã¾ã§ã¯ä¸Šè¨˜ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½œã£ãŸã‚‰Mainã‚¯ãƒ©ã‚¹ã§å®Ÿè£…ã—ã¦ã„ã¾ã—ãŸã€‚
ã—ã‹ã—å®Ÿéš›ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã¯ã“ã‚Œã‚‰ã®Mainã‚¯ãƒ©ã‚¹ã‚‚ä¸€ã¤ã®å‡¦ç†ã¨ã—ã¦çµ„ã¿åˆã‚ã›ã¦ã€ä¸€ã¤ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½œã‚Šä¸Šã’ã¦ã„ãã¾ã™ã€‚

ãã®éš›ã«ã„ã¡ã„ã¡å„ã‚¯ãƒ©ã‚¹ã®ä¸­èº«ã¾ã§è¦‹ã¦ã„ãŸã‚‰å¤§å¤‰è†¨å¤§ãªé‡ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚
ãã®ãŸã‚ã€ä»Šã¾ã§Mainã‚¯ãƒ©ã‚¹ã¨ã—ã¦æ‰±ã£ã¦ã„ãŸéƒ¨åˆ†ã‚’çª“å£ã¨ã—ã¦å¤–ã‹ã‚‰ä½¿ã„ã‚„ã™ãã—ãŸã‚‚ã®ãŒFacadeãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚

## å®Ÿè£…

ä»Šå›ã¯ãƒ¦ãƒ¼ã‚¶ã®Webãƒšãƒ¼ã‚¸ã‚’ä½œã‚Šã¾ã™ã€‚
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è¦‹ç«‹ã¦ãŸãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ã®æƒ…å ±ã‚’å–å¾—ã—ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç”¨ã„ã¦HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ã„ãã¾ã™ã€‚

### Database

ç°¡æ˜“çš„ã«ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«ï¼ˆemail, usernameï¼‰ã®ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã‚’ä½œæˆã—ã¾ã™ã€‚
getResourceAsStreamã§ç¾åœ¨ã®ã‚¯ãƒ©ã‚¹ã¨åŒã˜éšå±¤ã®filenameã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¢ã—InputStreamã¨ã—ã¦Propertiesã‚¯ãƒ©ã‚¹ã«æµã—è¾¼ã¿ã€ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰èª­ã¿è¾¼ã‚“ã æ–‡å­—åˆ—ã‚’ã‚­ãƒ¼ãƒãƒªãƒ¥ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ä¿å­˜ã—ã¾ã™ã€‚

```java:java
import java.util.Properties;

public class Database {
    public Database() {
    }
    public Properties getProperties(String dbname) {
        String filename = dbname + ".txt";
        Properties prop = new Properties();
        try {
            prop.load(getClass().getResourceAsStream(filename));
        } catch (Exception e) {
            System.out.println("Warning: " + filename + " is not found.");
        }
        return prop;
    }
}
```

ä¸‹è¨˜ã®maildata.txtã¯ã‚ã‚‰ã‹ã˜ã‚ä½œã£ã¦ãŠãã¾ã™ã€‚

```
bob@example.com=bob jones
alice@example.com=alice smith
kurimatsu@example.com=teppei kurimatsu
```

### HtmlWriter

ã“ã“ã§ã¯ç°¡å˜ãªWebãƒšãƒ¼ã‚¸ã‚’ã‚‚ã‚‰ã£ãŸå¤‰æ•°ã‚’ç”¨ã„ã¦ä½œã‚Šã¾ã™ã€‚

```java:java
import java.io.Writer;

public class HtmlWriter {
    private Writer writer;
    public HtmlWriter(Writer writer) {
        this.writer = writer;
    }
    public void title(String title) {
        String html = """
        <html>
            <head>
                <title>%s</title>
            </head>
            <body>
                <h1>%s</h1>
        """;
        try {
            writer.write(String.format(html, title, title));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void paragraph(String msg) {
        String html = """
        <p>%s</p>
        """;
        try {
            writer.write(String.format(html, msg));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void mailto(String mailaddr, String username) {
        String html = """
        <a href="mailto:%s">%s</a>
        """;
        try {
            writer.write(String.format(html, mailaddr, username));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void close() {
        String html = """
            </body>
        </html>
        """;
        try {
            writer.write(html);
            writer.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
```

### PageMaker

ã“ã“ãŒå…ˆã»ã©ã®`çª“å£`ã«ã‚ãŸã‚Šã¾ã™ã€‚
ä»Šã¾ã§ã®Mainã‚¯ãƒ©ã‚¹ã«è¿‘ã„ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚
Databaseã€HtmlWriterã‚’ç”¨ã„ã¦ãƒšãƒ¼ã‚¸ã‚’ä½œã‚Šã¾ã™ã€‚
ãƒ¦ãƒ¼ã‚¶ã‹ã‚‰ã¯ã“ã‚Œã‚‰ã®ã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒä½•ã‚’ã—ã¦ã„ã‚‹ã®ã‹ã‚’éš ã—ãªã‚‹ã¹ãã‚·ãƒ³ãƒ—ãƒ«ã«ã—ãŸã„ãŸã‚ã€ä½œæˆã™ã‚‹ãƒ¦ãƒ¼ã‚¶ã®ãƒ¡ãƒ¼ãƒ«ã¨ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ã‚‚ã‚‰ã„å¾Œã®å‡¦ç†ã¯ã“ã“ã®PageMakerã«ä»»ã›ã¦ã—ã¾ã„ã¾ã—ã‚‡ã†ã€‚

```java:java
import java.io.FileWriter;
import java.util.Properties;

public class PageMaker {
    private PageMaker() {
    }
    public static void makeWelcomePage(String mailaddr, String filename) {
        try {
            Database db = new Database();
            Properties mailprop = db.getProperties("maildata");
            String username = mailprop.getProperty(mailaddr);
            HtmlWriter writer = new HtmlWriter(new FileWriter(filename));
            writer.title("Welcome to " + username + "'s page!");
            writer.paragraph(username + "ã®ãƒšãƒ¼ã‚¸ã¸ã‚ˆã†ã“ãã€‚");
            writer.paragraph("ãƒ¡ãƒ¼ãƒ«å¾…ã£ã¦ã„ã¾ã™ã­ã€‚");
            writer.mailto(mailaddr, username);
            writer.close();
            System.out.println(filename + " is created for " + mailaddr + " (" + username + ")");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
```

## å®Ÿè¡Œ

### Main

ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹ãŒé©šãã»ã©ã‚·ãƒ³ãƒ—ãƒ«ã«ãªã‚Šã¾ã—ãŸã€‚
ã“ã‚Œã‹ã‚‰åˆ¥ã®æ©Ÿèƒ½ã‚’ä½œã‚‹ã“ã¨ã«ãªã£ã¦ã‚‚ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¯ã“ã®PageMakerã®å…ˆã§ä½•ãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ã‹ã¯æ„è­˜ã—ãªãã¦ã™ã¿ã¾ã—ãŸã€‚

```java:java
public class Main {
    public static void main(String[] args) {
        PageMaker.makeWelcomePage("kurimatsu@example.com", "welcome.html");
    }
}
```

å®Ÿè¡Œçµæœ

ä¸‹è¨˜ã®HTMLãŒä½œæˆã•ã‚Œã¦ã„ã‚Œã°æˆåŠŸã§ã™ã€‚

```html:html
<html>
    <head>
        <title>Welcome to teppei kurimatsu's page!</title>
    </head>
    <body>
        <h1>Welcome to teppei kurimatsu's page!</h1>
<p>teppei kurimatsuã®ãƒšãƒ¼ã‚¸ã¸ã‚ˆã†ã“ãã€‚</p>
<p>ãƒ¡ãƒ¼ãƒ«å¾…ã£ã¦ã„ã¾ã™ã­ã€‚</p>
<a href="mailto:kurimatsu@example.com">teppei kurimatsu</a>
    </body>
</html>
```

ä»Šå›ä½œæˆã—ãŸã“ã®Facadeãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é›†ã‚ã¦æ–°ã—ã„æ©Ÿèƒ½ã‚’ä½œã£ãŸã¨ã—ã¾ã—ã‚‡ã†ã€‚
ä¾‹ãˆã°CSSã‚’ä½œã‚‹æ©Ÿèƒ½ã‚’Facadeãƒ‘ã‚¿ãƒ¼ãƒ³ã§ä½œæˆã—ã¾ã™ã€‚
ã™ã‚‹ã¨ã€HTMLã«CSSã‚’ä»˜ä¸ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã‚Œã‚‚ä¸€ã¤ã®æ©Ÿèƒ½ã¨ã—ã¦è€ƒãˆã‚Œã°ã€ã¾ãŸFacadeãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã—ã¦ãƒ¦ãƒ¼ã‚¶ã‹ã‚‰ã¯å®Ÿè£…ã‚’éš ã—ã¦ãƒ‡ã‚¶ã‚¤ãƒ³ãŒé©ç”¨ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã€ŒDesignedPageMakerã€ã‚‚ä½œã‚Œã¾ã™ã€‚
<aside className="standard-callout">
Facadeãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å†èµ·çš„ã«é©ç”¨ã™ã‚Œã°è¤‡é›‘ãªå®Ÿè£…ã‚‚éš ã›ã‚‹
</aside>

See you later ğŸ‘‹