---

title: ã€ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‘Javaã®Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦
slug: design-pattern/java-builder-pattern
icon: â˜•ï¸
description: ä»Šå›ã¯Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚
date: "2023-09-17"
tags:
  - Java
  - ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³
categories:
  - ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°
---

## Builder

buildingï¼ˆå»ºç‰©ï¼‰ã‚’buildï¼ˆå»ºã¦ã‚‹ï¼‰ã®ãŒbuilderã§ã™ã€‚
builderãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç”¨ã„ã‚‹ã“ã¨ã§è¨­è¨ˆå›³ã¨æ§‹ç¯‰ä½œæ¥­ã€ãã®ä½œæ¥­ã®å…·ä½“çš„ãªå†…å®¹ã‚’åˆ¥ã€…ã«å®šç¾©ã—å»ºç‰©ã‚’é †åºç«‹ã¦ã¦ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## å®Ÿè£…

ä»Šå›ã¯æ–‡æ›¸ã‚’ä½œæˆã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½œã‚Šã¾ã™ã€‚

### Builderã‚¯ãƒ©ã‚¹

ã“ã“ã§ã¯æ–‡æ›¸ã‚’ä½œã‚‹ãŸã‚ã®ä½œæ¥­ã‚’æ´—ã„å‡ºã—ã¾ã™ã€‚
ã“ã‚Œã‚‰ã¯æ–‡æ›¸ã‚’ä½œã‚‹é“å…·ã§ã‚ã‚Šã€ã“ã‚Œã‚‰ã‚’ä½¿ã£ã¦æ–‡æ›¸ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚

```java:java
public abstract class Builder {
    public abstract void makeTitle(String title);
    public abstract void makeString(String str);
    public abstract void makeItems(String[] items);
    public abstract void close();
}
```

### Directorã‚¯ãƒ©ã‚¹

ã“ã“ã§ã¯Builderã‚¯ãƒ©ã‚¹ã§å®šç¾©ã—ãŸé“å…·ã‚’ä½¿ã£ã¦å®Ÿéš›ã«ã©ã®ã‚ˆã†ã«æ–‡æ›¸ã‚’`ä½œã£ã¦`ã„ãã®ã‹ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚

```java:java
public class Director {
    private final Builder builder;
    public Director(Builder builder) {
        this.builder = builder;
    }
    public void construct(){
        builder.makeTitle("Types of PokÃ©mon");
        builder.makeString("There are three types of PokÃ©mon.");
        builder.makeItems(new String[]{
            "Fire type",
            "Water type",
            "Grass type"
        });
        builder.makeString("Following is the PokÃ©mon corresponding to each type.");
        builder.makeItems(new String[]{
            "Charmander",
            "Squirtle",
            "Bulbasaur"
        });
        builder.close();
    }
}
```

### ConcreteBuilderã‚¯ãƒ©ã‚¹

ã“ã“ã§ã¯`ã©ã®ã‚ˆã†ãªæ–‡æ›¸ã‚’ä½œã‚‹ã®ã‹`ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚
Builderã‚¯ãƒ©ã‚¹ã§å®šç¾©ã—ãŸé“å…·ã®å…·ä½“çš„ãªå‡¦ç†ï¼ˆä½¿ã„æ–¹ï¼‰ã‚’è¨˜è¿°ã™ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚

HTMLBuilderã‚¯ãƒ©ã‚¹

```java:java
import java.io.FileWriter;
import java.io.IOException;
import java.io.Writer;

public class HTMLBuilder extends Builder {
    private String filename = "untitled.html";
    private final StringBuilder sb = new StringBuilder();
    @Override
    public void makeTitle(String title) {
        this.filename = title + ".html";
        sb.append("<!DOCTYPE html>");
        sb.append("<html><head><title>" + title + "</title></head><body>");
        sb.append("<h1>" + title + "</h1>");
    }
    @Override
    public void makeString(String str) {
        sb.append("<p>" + str + "</p>");
    }
    @Override
    public void makeItems(String[] items) {
        sb.append("<ul>");
        for (String item : items) {
            sb.append("<li>" + item + "</li>");
        }
        sb.append("</ul>");
    }
    @Override
    public void close() {
        sb.append("<hr/></body></html>");
        try {
            Writer writer = new FileWriter(filename);
            writer.write(sb.toString());
            writer.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    public String getResult() {
        return filename;
    }
}
```

TextBuilderã‚¯ãƒ©ã‚¹

```java:java
public class TextBuilder extends Builder {
    private final StringBuilder sb = new StringBuilder();
    @Override
    public void makeTitle(String title) {
        sb.append("==============================\n");
        sb.append("[" + title + "]\n");
        sb.append("\n");
    }
    @Override
    public void makeString(String str) {
        sb.append("â– " + str + "\n");
        sb.append("\n");
    }
    @Override
    public void makeItems(String[] items) {
        for (String item : items) {
            sb.append("ã€€ãƒ»" + item + "\n");
        }
        sb.append("\n");
    }
    @Override
    public void close() {
        sb.append("==============================\n");
    }
    public String getResult() {
        return sb.toString();
    }
}
```

### Mainã‚¯ãƒ©ã‚¹

ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°(args)ã‚’ç”¨ã„ã¦ä½œæˆã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã‚’æŒ‡å®šã—ã¾ã™ã€‚
ä½•ã‚‚å…¥åŠ›ã•ã‚Œã¦ã„ãªã‘ã‚Œã°usageãƒ¡ã‚½ãƒƒãƒ‰ã§ä½¿ã„æ–¹ã‚’ç¤ºã—ã¾ã™ã€‚

```java:java
public class Main {
    public static void main(String[] args) {
        if (args.length != 1) {
            usage();
            System.exit(0);
        }
        if (args[0].equals("plain")) {
            TextBuilder textBuilder = new TextBuilder();
            Director director = new Director(textBuilder);
            director.construct();
            String result = textBuilder.getResult();
            System.out.println(result);
        } else if (args[0].equals("html")) {
            HTMLBuilder htmlBuilder = new HTMLBuilder();
            Director director = new Director(htmlBuilder);
            director.construct();
            String filename = htmlBuilder.getResult();
            System.out.println(filename + " has been created.");
        } else {
            usage();
            System.exit(0);
        }
    }
    public static void usage() {
        System.out.println("Usage: java Main plain");
        System.out.println("Usage: java Main html");
    }
}
```

å®Ÿè¡Œçµæœ(args == â€œplainâ€)

```
==============================
[Types of PokÃ©mon]

â– There are three types of PokÃ©mon.

  ãƒ»Fire type
  ãƒ»Water type
  ãƒ»Grass type

â– Following is the PokÃ©mon corresponding to each type.

  ãƒ»Charmander
  ãƒ»Squirtle
  ãƒ»Bulbasaur

==============================
```

å¼•æ•°ã«â€htmlâ€ã‚’æ¸¡ã—ã¦å®Ÿè¡Œã™ã‚Œã°HTMLãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒä½œæˆã•ã‚Œã¾ã™ã€‚
Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§è¨­è¨ˆæ›¸ã€é“å…·ã€ä½¿ã„æ–¹ã®ã‚ˆã†ã«ãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆ†é›¢ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚

See you later ğŸ‘‹