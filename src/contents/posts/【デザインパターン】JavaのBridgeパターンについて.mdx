---
title: ã€ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‘Javaã®Bridgeãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦
slug: design-pattern/java-bridge-pattern
icon: â˜•ï¸
description: ä»Šå›ã¯bridgeãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚
date: "2023-09-20"
tags:
  - Java
  - ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³
categories:
  - ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°
---

## Bridge

Bridgeãƒ‘ã‚¿ãƒ¼ãƒ³ã¯**æ©Ÿèƒ½ã®æ‹¡å¼µ**ã¨**å®Ÿè£…ã®æ‹¡å¼µ**ã‚’åˆ†ã‘ã‚‹ãŸã‚ã«å­˜åœ¨ã—ã¾ã™ã€‚
åˆ†ã‘ã‚‹ãŸã‚ã«ã¯æ©Ÿèƒ½ã®éšå±¤ã¨å®Ÿè£…ã®éšå±¤ã‚’ä½œã‚Šã€ãã‚Œã‚‰ã‚’`Bridgeï¼ˆæ©‹ï¼‰`ã§æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### æ©Ÿèƒ½ã®ã‚¯ãƒ©ã‚¹éšå±¤

ã‚ã‚‹ã‚¯ãƒ©ã‚¹SomethingãŒã‚ã‚‹ã¨ã—ã¾ã™ã€‚
ã“ã®ã‚¯ãƒ©ã‚¹ã«æ–°ã—ã„æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã‚ˆã†ã¨ã—ãŸã‚‰Somethingã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã‚’ä½œã‚Šã¾ã™ã€‚

```java:java
public class Something {
	public void doSomething() { ... }
}

public class SomethingGood extends Something {
	public void doSomethingAnother() { ... }
}
```

ç¾åœ¨ã®éšå±¤ã¯ä»¥ä¸‹ã§ã™ã€‚

```
Something
â”” SomethingGood
```

ã•ã‚‰ã«æ©Ÿèƒ½ã‚’è¿½åŠ ã—ãŸã„ã¨æ€ã„ã¾ã—ãŸã€‚

```java:java
public class SomethingBetter extends Something {
	public void doSomethingElse() { ... }
}
```

ç¾åœ¨ã®éšå±¤ã¯ä»¥ä¸‹ã§ã™ã€‚

```
Something
â”” SomethingGood
	â”” SomethingBetter
```

ã“ã®ã‚ˆã†ã«æ©Ÿèƒ½ã‚’ç¶™ãè¶³ã—ã¦ã„ãå ´æ‰€ã‚’`**æ©Ÿèƒ½ã®ã‚¯ãƒ©ã‚¹éšå±¤`**ã¨è¨€ã„ã¾ã™ã€‚

<aside className="standard-callout">
ä¸€èˆ¬çš„ã«ã‚¯ãƒ©ã‚¹éšå±¤ã¯æ·±ã™ããªã„ã»ã†ãŒè‰¯ã„ã¨è¨€ã‚ã‚Œã‚‹
</aside>

### å®Ÿè£…ã®ã‚¯ãƒ©ã‚¹éšå±¤

Templateãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ€ã„å‡ºã—ã¦ãã ã•ã„ã€‚
ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¯ãƒ©ã‚¹ã¯ä¸€é€£ã®ãƒ¡ã‚½ãƒƒãƒ‰ç¾¤ã‚’æŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦å®£è¨€ã—ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã§ãã‚Œã‚‰ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
ã“ã“ã«ã‚‚ã‚¯ãƒ©ã‚¹éšå±¤ãŒå­˜åœ¨ã—ã¾ã™ã€‚
ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¯ãƒ©ã‚¹ã¨ã—ã¦AbstractClassã‚’ä½œã‚Šã€ãã®å…·ä½“çš„ãªãƒ¡ã‚½ãƒƒãƒ‰ã¯ConcreteClassã§å®Ÿè£…ã—ã¾ã™ã€‚

```java:java
public abstract class AbstractClass {
	public abstract void doSomething();
}

public class ConcreteClass {
	public void doSomething() {
		System.out.println("do something");
	}
}
```

ã“ã®æ™‚ã®éšå±¤ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```
AbstractClass
â”” ConcreteClass
```

ã“ã‚Œã‚’`**å®Ÿè£…ã®ã‚¯ãƒ©ã‚¹éšå±¤**`ã¨å‘¼ã³ã¾ã™ã€‚

ã¾ã¨ã‚ã‚‹ã¨

- **æ©Ÿèƒ½ã®ã‚¯ãƒ©ã‚¹éšå±¤ã§ã¯æ–°ã—ã„æ©Ÿèƒ½ã®è¿½åŠ **
- **å®Ÿè£…ã®ã‚¯ãƒ©ã‚¹éšå±¤ã§ã¯æ–°ã—ã„å‡¦ç†ã®ä¸­èº«ã®è¿½åŠ **

ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚
çµµã‚’æãæ™‚ã«`ã‚¯ãƒ¬ãƒ¨ãƒ³ã§æã`ã€`ç­†ã§æã`ï¼ˆå®Ÿè£…ã®ã‚¯ãƒ©ã‚¹éšå±¤ï¼‰ã®è¿½åŠ ã¨`ä¼¼é¡”çµµã‚’æã`ã€`é¢¨æ™¯ç”»ã‚’æã`ï¼ˆæ©Ÿèƒ½ã®ã‚¯ãƒ©ã‚¹éšå±¤ï¼‰ã®è¿½åŠ ã‚’åˆ¥ã€…ã«è¡Œã†ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚

ä»Šå›ã¯ãƒ‡ãƒã‚¤ã‚¹ã”ã¨ã®é€šçŸ¥æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

## å®Ÿè£…ï¼ˆæ©Ÿèƒ½ã®ã‚¯ãƒ©ã‚¹éšå±¤ï¼‰

### Notification

`**æ©Ÿèƒ½ã®ã‚¯ãƒ©ã‚¹éšå±¤**`ã®æœ€ä¸Šä½ã«å½“ãŸã‚‹ã‚¯ãƒ©ã‚¹ã§ã™ã€‚
implãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯Notificationã‚¯ãƒ©ã‚¹ã®`å®Ÿè£…`ã‚’è¡¨ã™ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã™ã€‚
ã“ã“ã§ã¯implã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹å‡¦ç†ã‚’ç”¨ã„ã¦1äººã«å¯¾ã—ã¦çŸ¥ã‚‰ã›ã‚‹**æ©Ÿèƒ½**ã€`Notify`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

```java:java
public class Notification {
    private NotificationImpl impl;

    public Notification(NotificationImpl impl) {
        this.impl = impl;
    }

    protected void setMessage(String title, String message) {
        impl.setMessage(title, message);
    }

    protected void sendMessage(String to) {
        impl.sendMessage(to);
    }

    public final void Notify(String title, String message, String to) {
        setMessage(title, message);
        sendMessage(to);
    }
}
```

### MultiNotification

ã“ã“ã§ã¯æ©Ÿèƒ½ã®è¿½åŠ ã‚’è¡Œã„ãŸã„ã®ã§ã€è¤‡æ•°äººã«å¯¾ã—ã¦é€šçŸ¥ã‚’ã™ã‚‹`multiNotify`ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

```java:java
public class MultiNotification extends Notification {
    public MultiNotification(NotificationImpl impl) {
        super(impl);
    }

    public void MultiNotify(String title, String message, String[] to) {
        setMessage(title, message);
        for (String s : to) {
            sendMessage(s);
        }
    }
}
```

## å®Ÿè£…ï¼ˆå®Ÿè£…ã®ã‚¯ãƒ©ã‚¹éšå±¤ï¼‰

### NotificatioinImpl

`**å®Ÿè£…ã®ã‚¯ãƒ©ã‚¹éšå±¤**`ã®æœ€ä¸Šä½ã«ä½ç½®ã—ã¾ã™ã€‚
ã“ã®ã‚¯ãƒ©ã‚¹ãŒå…·ä½“çš„ãªå®Ÿè£…ã‚’ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¯ãƒ©ã‚¹ã®Notificationã¸æ©‹æ¸¡ã—ã—ã¦ã„ã¾ã™ã€‚
setMessageã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦å…·ä½“çš„ãªå‡¦ç†ã‚’è¨˜è¿°ã—ã¦ã„ã¾ã™ã€‚ï¼ˆä»Šå›ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å½¢å¼ãŒãƒ‡ãƒã‚¤ã‚¹ã”ã¨ã§å¤‰ã‚ã‚‰ãªã„ãŸã‚ï¼‰

```java:java
public abstract class NotificationImpl {
    protected StringBuilder message = new StringBuilder();
    protected void setMessage(String title, String message){
        this.message.append("Title: ã€" + title + "ã€‘\n");
        this.message.append("----------------------------\n ");
        this.message.append(message + "\n");
        this.message.append("----------------------------\n ");
    }
    protected abstract void sendMessage(String to);
}
```

ã“ã“ãŒè‚ã§ã€NotificationImplãŒå­˜åœ¨ã—ãªã„ã¨**å®Ÿè£…**ã¨**æ©Ÿèƒ½**ã‚’åˆ†é›¢ã™ã‚‹ã“ã¨ãŒã§ããªããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚
æ™‚é–“ãŒã‚ã‚‹æ–¹ã¯è©¦ã—ã«ç›´æ¥ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¯ãƒ©ã‚¹ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã™ã‚‹å½¢ã§ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¨˜è¿°ã—ã¦ã¿ã¦ãã ã•ã„ã€‚
æ©Ÿèƒ½ãŒNotificationã‚¯ãƒ©ã‚¹ã«é›†ä¸­ã—ã¦ã—ã¾ã„ã¾ã™ã€‚
NotificationImplã‚’å™›ã¾ã›ã¦å…·ä½“çš„ãª**å®Ÿè£…**ã‚’**æ©Ÿèƒ½**ã‹ã‚‰éš ã™ã“ã¨ã§ãã‚Œãã‚Œåˆ¥ã€…ã«ã‚¹ã‚±ãƒ¼ãƒ«ã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã€ã„ã‚ã‚†ã‚‹ç¥ã‚¯ãƒ©ã‚¹ã‚’é˜²ãã“ã¨ã«ã‚‚ã¤ãªãŒã‚Šã¾ã™ã€‚

### iPhoneNotificationImpl

iPhoneã«å¯¾ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹å…·ä½“çš„ãªãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¨˜è¿°ã—ã¾ã™ã€‚

```java:java
public class iPhoneNotificationImpl extends NotificationImpl {
    @Override
    protected void sendMessage(String to) {
        System.out.println("Send message to \"" + to + "@icloud.com\"");
        System.out.println(this.message);
    }
}
```

### AndroidNotificationImpl

Androidã«å¯¾ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹å…·ä½“çš„ãªãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¨˜è¿°ã—ã¾ã™ã€‚

```java:java
public class AndroidNotificationImpl extends NotificationImpl {
    @Override
    protected void sendMessage(String to) {
        System.out.println("Send message to \"" + to + "@gmail.com\"");
        System.out.println(this.message);
    }
}
```

## å®Ÿè¡Œ

### Mainã‚¯ãƒ©ã‚¹

æ©Ÿèƒ½ã¨å®Ÿè£…ã‚’åˆ†ã‘ãŸã“ã¨ã«ã‚ˆã‚Šã€ãã‚Œãã‚Œã‚’çµ„ã¿åˆã‚ã›ã¦æŸ”è»Ÿãªå‡¦ç†ã‚’å°‘ãªã„ä¾å­˜é–¢ä¿‚ã§å®Ÿç¾ã§ãã¾ã—ãŸã€‚

```java:java
public class Main {
    public static void main(String[] args) {
        Notification notification = new Notification(new iPhoneNotificationImpl());
        notification.Notify("Hello", "This is a message for iPhone", "John");
        notification = new Notification(new AndroidNotificationImpl());
        notification.Notify("Hello", "This is a message for Android", "Mary");
        MultiNotification multiNotification = new MultiNotification(new iPhoneNotificationImpl());
        multiNotification.MultiNotify("Hello", "This is a message for iPhone", new String[] {"Kurimatsu", "Steve"});
        multiNotification = new MultiNotification(new AndroidNotificationImpl());
        multiNotification.MultiNotify("Hello", "This is a message for Android", new String[] {"Tom", "Jerry"});
    }
}
```

å®Ÿè¡Œçµæœ

```
Send message to "John@icloud.com"
Title: ã€Helloã€‘
----------------------------
 This is a message for iPhone
----------------------------
 
Send message to "Mary@gmail.com"
Title: ã€Helloã€‘
----------------------------
 This is a message for Android
----------------------------
 
Send message to "Kurimatsu@icloud.com"
Title: ã€Helloã€‘
----------------------------
 This is a message for iPhone
----------------------------
 
Send message to "Steve@icloud.com"
Title: ã€Helloã€‘
----------------------------
 This is a message for iPhone
----------------------------
 
Send message to "Tom@gmail.com"
Title: ã€Helloã€‘
----------------------------
 This is a message for Android
----------------------------
 
Send message to "Jerry@gmail.com"
Title: ã€Helloã€‘
----------------------------
 This is a message for Android
----------------------------
```

See you later ğŸ‘‹